// Migration script to add new columns to the applications table\n// Run this script after the server starts to ensure the database schema is up to date\n\nimport { getDb } from '../database.js';\n\nexport async function migrate() {\n  const db = await getDb();\n  // Add columns if they do not exist\n  await db.exec(`ALTER TABLE applications ADD COLUMN IF NOT EXISTS linkedin_url TEXT;`);\n  await db.exec(`ALTER TABLE applications ADD COLUMN IF NOT EXISTS current_employer TEXT;`);\n  await db.exec(`ALTER TABLE applications ADD COLUMN IF NOT EXISTS years_experience INTEGER;`);\n  await db.exec(`ALTER TABLE applications ADD COLUMN IF NOT EXISTS education_level TEXT;`);\n  await db.exec(`ALTER TABLE applications ADD COLUMN IF NOT EXISTS start_date TEXT;`);\n  await db.exec(`ALTER TABLE applications ADD COLUMN IF NOT EXISTS salary_expectations TEXT;`);\n  await db.exec(`ALTER TABLE applications ADD COLUMN IF NOT EXISTS willing_to_relocate BOOLEAN;`);\n  await db.exec(`ALTER TABLE applications ADD COLUMN IF NOT EXISTS referral_source TEXT;`);\n  await db.exec(`ALTER TABLE applications ADD COLUMN IF NOT EXISTS portfolio_url TEXT;`);\n  await db.exec(`ALTER TABLE applications ADD COLUMN IF NOT EXISTS references TEXT;`);\n  console.log('âœ… Migration completed: added new application fields');\n}\n\n// If this file is run directly, execute migration\nif (import.meta.url === `file://${process.argv[1]}`) {\n  migrate().catch(err => {\n    console.error('Migration failed:', err);\n    process.exit(1);\n  });\n}\n
